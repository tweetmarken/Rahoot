(this.webpackJsonpcahoots=this.webpackJsonpcahoots||[]).push([[0],{39:function(e,t,n){e.exports={centered:"styles_centered__x3bzC"}},42:function(e,t,n){e.exports={hero_heading:"styles_hero_heading__1odbt"}},44:function(e,t,n){e.exports=n(75)},49:function(e,t,n){},51:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),l=n.n(c),o=(n(49),n(9)),i=n(22),u=(n(50),n(51),n(6)),s=n(77),m=n(78),d=n(79),h=n(80),f=n(81),g=n(13),b=n(16),E=n(19),v=n(18),p=n(20),j=n(52),O=JSON.parse('{"apiKey": "AIzaSyA_b6fSj41rPl8kUKPRdQAQ6kogYV_Mqhg","authDomain": "kahoot-269809.firebaseapp.com","databaseURL": "https://kahoot-269809.firebaseio.com","projectId": "kahoot-269809","storageBucket": "kahoot-269809.appspot.com","messagingSenderId": "219922836957","appId": "1:219922836957:web:d75cb25595d9f86e635a34","measurementId": "G-W08T544ZDX"}'),w=function e(t){Object(g.a)(this,e),j.apps.length||j.initializeApp(O),this.firestore=j.firestore(),this.auth=j.auth()},y=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(b.a)(t,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.firestore.collection("games").doc(t.gameId).collection("players").doc(e).get().then(this._convertDocToPlayer)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.firestore;if("gameId"in e){var n=e.gameId;delete e.gameId,t=t.collection("games").doc(n).collection("players")}return t.add(e).then((function(e){return e.get()})).then(this._convertDocToPlayer)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a=this.firestore;return"gameId"in t&&(a=a.collection("games").doc(t.gameId)),a=a.collection("players"),"limit"in t&&(a=a.limit(t.limit)),void 0!==n?a.onSnapshot((function(t){var a=[];t.forEach((function(t){return a.push(e._convertDocToPlayer(t))})),n(a)})):a.get().then((function(t){return t.docs.map((function(t){return e._convertDocToQuestion(t)}))}))}},{key:"_convertDocToPlayer",value:function(e){return Object.assign({id:e.id},e.data())}}]),t}(w),C=function(e){return(new y).create(e)},I=n(76),k=n(39),S=n.n(k),N=function(e){return r.a.createElement(I.a,{className:S.a.centered,style:{maxWidth:e.maxWidth||null,height:e.verticalCentered?"100%":null}},e.children)},_=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,null,[{key:"STATE_DRAFT",get:function(){return"draft"}},{key:"STATE_WAITING_FOR_PLAYERS",get:function(){return"waitingForPlayers"}}]),e}(),A=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(b.a)(t,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.firestore.collection("games").add(Object.assign({state:_.STATE_DRAFT},e)).then((function(e){return e.get()})).then(this._convertDocToGame)}},{key:"get",value:function(e,t){var n=this,a=this._getGameDoc(e);return void 0!==t?a.onSnapshot((function(e){return t(n._convertDocToGame(e))})):a.get().then(this._convertDocToGame)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore.collection("games");return"ownerId"in t&&(n=n.where("ownerId","==",t.ownerId)),"state"in t&&(n=n.where("state","==",t.state)),"shortCode"in t&&(n=n.where("shortCode","==",t.shortCode)),"limit"in t&&(n=n.limit(t.limit)),n.get().then((function(t){return t.docs.map((function(t){return e._convertDocToGame(t)}))}))}},{key:"update",value:function(e,t){var n=this._getGameDoc(e);return"currentQuestionId"in t&&(t.currentQuestion=n.collection("questions").doc(t.currentQuestionId),delete t.currentQuestionId),n.update(t)}},{key:"_getGameDoc",value:function(e){return this.firestore.collection("games").doc(e)}},{key:"_convertDocToGame",value:function(e){var t=Object.assign({id:e.id},e.data());return"currentQuestion"in t&&(t.currentQuestionId=t.currentQuestion.id,t.currentQuestion=t.currentQuestion.path),t}}]),t}(w),D=function(e,t){return(new A).get(e,t)},T=function(e){var t=e.playerName,n=e.setPlayerName,a=e.joinGame;return r.a.createElement(s.a,{onSubmit:function(e){e.preventDefault(),a()}},r.a.createElement(m.a,null,r.a.createElement(d.a,null,"Your Nickname:"),r.a.createElement(h.a,{value:t,onChange:function(e){return n(e.target.value)}})),r.a.createElement(f.a,{color:"primary",type:"submit"},"JOIN"))},x=function(){var e=Object(i.h)().gameId,t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(""),s=Object(u.a)(o,2),m=s[0],d=s[1],h=Object(a.useState)(null),f=Object(u.a)(h,2),g=f[0],b=f[1];return Object(a.useEffect)((function(){e&&null===g&&D(e).then(b)}),[e,g]),r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("h1",null,g?g.name:null),m?r.a.createElement(i.a,{to:"/play/".concat(e,"/as/").concat(m)}):r.a.createElement(T,{playerName:c,setPlayerName:l,joinGame:function(){return C({name:c,gameId:e}).then((function(e){return d(e.id)}))}}))},q=n(82),Q=n(83),W=n(94),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new y).get(e,t)},G=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(b.a)(t,[{key:"create",value:function(e){var t=this._popAttr(e,"gameId"),n=this._popAttr(e,"playerId"),a=this._popAttr(e,"questionId");return this.firestore.collection("games").doc(t).collection("answers").add(Object.assign({player:this.firestore.doc(["/games",t,"players",n].join("/")),question:this.firestore.doc(["/games",t,"questions",a].join("/"))},e)).then((function(e){return e.get()})).then(this._convertDocToAnswer)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore;return"gameId"in t&&(n=n.collection("games").doc(t.gameId)),n=n.collection("answers"),"questionId"in t&&(n=n.where("question","==",this.firestore.doc("games/".concat(t.gameId,"/questions/").concat(t.questionId)))),"limit"in t&&(n=n.limit(t.limit)),n.get().then((function(t){return t.docs.map((function(t){return e._convertDocToAnswer(t)}))}))}},{key:"_convertDocToAnswer",value:function(e){return Object.assign({id:e.id},e.data())}},{key:"_popAttr",value:function(e,t){var n=e[t];return delete e[t],n}}]),t}(w);function P(e,t){var n=e[t];return delete e[t],n}var R=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(b.a)(t,[{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.firestore,r={};return"gameId"in n&&(a=a.collection("games").doc(n.gameId).collection("questions"),r.gameId=n.gameId),a.doc(e).get().then((function(e){return t._convertDocToQuestion(e,r)}))}},{key:"create",value:function(e){var t=this,n=Object.assign({},e),a=P(n,"gameId");return this.firestore.collection("games").doc(a).collection("questions").add(n).then((function(e){return e.get()})).then((function(e){return t._convertDocToQuestion(e,{gameId:a})}))}},{key:"update",value:function(e,t){var n=Object.assign({},t),a=P(n,"gameId");return this.firestore.collection("games").doc(a).collection("questions").doc(e).update(n)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore,a={};return"gameId"in t&&(n=n.collection("games").doc(t.gameId).collection("questions"),a.gameId=t.gameId),"from"in t&&(n=n.where("order",">",t.from)),n=n.orderBy("order"),"limit"in t&&(n=n.limit(t.limit)),n.get().then((function(t){return t.docs.map((function(t){return e._convertDocToQuestion(t,a)}))}))}},{key:"_convertDocToQuestion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({id:e.id},e.data(),t)}}]),t}(w),F=function(e){var t=new R;return(new A).get(e.gameId).then((function(e){return t.get(e.currentQuestionId,{gameId:e.id})})).then((function(t){return e.isCorrect=t.correctAnswer===e.choice,e.questionId=t.id,console.log(e),(new G).create(e)}))},B=function(e){var t=e.recordAnswer;return r.a.createElement(q.a,null,["A","B","C","D"].map((function(e){return r.a.createElement(Q.a,{sm:12,md:6,className:"mb-4",key:e},r.a.createElement(f.a,{className:"w-100 h-100",onClick:function(){return t(e)}},r.a.createElement("strong",null,e)))})))},L=function(){var e=Object(i.h)(),t=e.gameId,n=e.playerId,c=Object(a.useState)(),l=Object(u.a)(c,2),o=l[0],s=l[1],m=Object(a.useState)(""),d=Object(u.a)(m,2),h=d[0],f=d[1],g=Object(a.useState)(null),b=Object(u.a)(g,2),E=b[0],v=b[1],p=Object(a.useState)(""),j=Object(u.a)(p,2),O=j[0],w=j[1],y=function(e){e&&(v(null),s(e))};Object(a.useEffect)((function(){t&&n&&(D(t,y),U(n,{gameId:t}).then((function(e){return f(e.name)})))}),[t,n]);switch(o?o.state:null){case"pendingQuestion":return r.a.createElement(N,{maxWidth:500,verticalCentered:!0},"Next question coming up...");case"showingQuestion":return E?r.a.createElement(N,{maxWidth:500,verticalCentered:!0},"You chose ",E.choice,"!"):r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement(q.a,{className:"mb-4"},r.a.createElement(Q.a,{sm:12},r.a.createElement("h2",null,"Hi ",h,"!"),r.a.createElement("h3",null,"Choose your answer:"))),r.a.createElement(B,{recordAnswer:function(e){F({playerId:n,playerName:h,gameId:t,choice:e}).then(v).catch((function(e){w(e),setTimeout((function(){return w("")}),5e3)}))}}),O?r.a.createElement(W.a,{color:"danger"},O):null);case"showingQuestionResults":return r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("div",null,"Showing question results..."));default:return r.a.createElement(N,{maxWidth:500,verticalCentered:!0},"Waiting for game to start...")}},z=n(84),M=n(85),Y=n(42),J=n.n(Y),V=function(e){return(new A).list({shortCode:String(e),state:_.STATE_WAITING_FOR_PLAYERS})},H=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(""),g=Object(u.a)(l,2),b=g[0],E=g[1];return n.length>1?r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement(z.a,null,n.map((function(e){return r.a.createElement(o.b,{key:e.id,to:"/join/".concat(e.id)},r.a.createElement(M.a,{tag:"button",action:!0},e.name))})))):1==n.length?r.a.createElement(i.a,{to:"/join/".concat(n[0].id)}):r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("h1",{className:J.a.hero_heading},"Cahoots!"),r.a.createElement(s.a,{className:"mb-5",onSubmit:function(e){e.preventDefault(),V(b).then(c)}},r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"shortCode"},"Game Code:"),r.a.createElement(h.a,{id:"shortCode",type:"number",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(f.a,{color:"primary",disabled:!b,type:"submit"},"Find Game")),r.a.createElement("aside",null,"Want to create your own quiz?\xa0",r.a.createElement(o.b,{to:"/login"},"Sign Up")))},K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new y,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new A;return a.update(e,{state:"waitingForPlayers"}),n.list({gameId:e},t)},X=function(e){var t=e.players;return r.a.createElement(z.a,null,t.map((function(e){return r.a.createElement(M.a,{key:e.id},e.name)})))},Z=function(e){var t=Object(i.h)().gameId,n=Object(a.useState)([]),c=Object(u.a)(n,2),l=c[0],s=c[1],m=Object(a.useState)(null),d=Object(u.a)(m,2),h=d[0],g=d[1],b="".concat(window.location.origin,"/cahoots/");return Object(a.useEffect)((function(){t&&(K(t,s),D(t).then(g))}),[t]),r.a.createElement(N,{verticalCentered:!0,maxWidth:800},r.a.createElement("h1",{className:"mb-4"},"Waiting for Players to join..."),r.a.createElement("p",null,"To join, go to ",r.a.createElement("a",{href:b,rel:"noopener noreferrer",target:"_blank"},b)," and enter the game code ",r.a.createElement("strong",null,h?h.shortCode:"___")),r.a.createElement(X,{players:l}),r.a.createElement("div",{className:"mt-4"},r.a.createElement(o.b,{to:"/host/".concat(t,"/questions/pending")},r.a.createElement(f.a,{color:"primary"},"Start"))))},$=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(b.a)(t,[{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.email,a=t.password;return this.auth.createUserWithEmailAndPassword(n,a).then((function(t){var n=t.user;return e._convertUser(n)})).catch((function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(n)}))}},{key:"login",value:function(e){var t=this,n=e.email,a=e.password;return this.auth.signInWithEmailAndPassword(n,a).then((function(e){var n=e.user;return t._convertUser(n)})).catch((function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(n)}))}},{key:"onCurrentUserChange",value:function(e){var t=this;this.auth.onAuthStateChanged((function(n){n&&e(t._convertUser(n))}))}},{key:"_convertUser",value:function(e){return{id:e.uid,email:e.email,name:e.displayName}}}]),t}(w),ee=function(e){var t=e.email,n=e.password;return(new $).create({email:t,password:n})},te=function(e){var t=e.email,n=e.password;return(new $).login({email:t,password:n})},ne=function(e,t){var n=t.email,a=t.password,r=t.authFn,c=t.successCallback;e.preventDefault(),r({email:n,password:a}).then((function(e){return c(e)}))},ae=function(e){var t=e.onUserChange,n=Object(a.useState)(""),c=Object(u.a)(n,2),l=c[0],o=c[1],i=Object(a.useState)(""),g=Object(u.a)(i,2),b=g[0],E=g[1];return r.a.createElement(s.a,{className:"mb-5",onSubmit:function(e){return ne(e,{email:l,password:b,authFn:ee,successCallback:t})}},r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"email"},"Email:"),r.a.createElement(h.a,{id:"email",name:"email",value:l,onChange:function(e){return o(e.target.value)}})),r.a.createElement(m.a,null,r.a.createElement(d.a,null,"Password:"),r.a.createElement(h.a,{type:"password",name:"password",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(f.a,{color:"primary"},"Sign Up"))},re=function(e){var t=e.onUserChange,n=Object(a.useState)(""),c=Object(u.a)(n,2),l=c[0],o=c[1],i=Object(a.useState)(""),g=Object(u.a)(i,2),b=g[0],E=g[1];return r.a.createElement(s.a,{className:"mb-5",onSubmit:function(e){return ne(e,{email:l,password:b,authFn:te,successCallback:t})}},r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"email"},"Email:"),r.a.createElement(h.a,{id:"email",name:"email",value:l,onChange:function(e){return o(e.target.value)}})),r.a.createElement(m.a,null,r.a.createElement(d.a,null,"Password:"),r.a.createElement(h.a,{type:"password",name:"password",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(f.a,{color:"primary"},"Login"))},ce=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(null),s=Object(u.a)(o,2),m=s[0],d=s[1],h=function(e){e.preventDefault(),l(!c)};return m?r.a.createElement(i.a,{to:"/games"}):c?r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("h1",null,"Login to Cahoots!"),r.a.createElement(re,{onUserChange:d}),r.a.createElement("div",null,"No account? ",r.a.createElement("br",null),r.a.createElement(f.a,{color:"link",onClick:h},"Sign Up!"))):r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("h1",null,"Signup for Cahoots!"),r.a.createElement(ae,{onUserChange:d}),r.a.createElement("div",null,"Have an account? ",r.a.createElement("br",null),r.a.createElement(f.a,{color:"link",onClick:h},"Login")))},le=function(){var e=new $;return new Promise((function(t){return e.onCurrentUserChange(t)}))},oe=function(){var e=new A;return le().then((function(t){return t?e.list({ownerId:t.id}):null}))},ie=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(null),o=Object(u.a)(l,2),s=o[0],m=o[1];return Object(a.useEffect)((function(){oe().then(c)}),[]),s?r.a.createElement(i.a,{to:s}):r.a.createElement(I.a,{style:{maxWidth:"500px"}},r.a.createElement("h1",null,"Your Games"),r.a.createElement(z.a,null,n.map((function(e){return r.a.createElement(M.a,{key:e.id,onClick:function(){return m("/games/".concat(e.id))},tag:"button",action:!0},e.name)})),r.a.createElement(M.a,{onClick:function(){return m("/games/create")},tag:"button",color:"info",action:!0},"Create Game")))},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A,n=String(Math.floor(Math.random()*Math.floor(9999)));return t.create(Object.assign({shortCode:n},e))},se=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(""),s=Object(u.a)(o,2),g=s[0],b=s[1],E=Object(a.useState)(null),v=Object(u.a)(E,2),p=v[0],j=v[1];return Object(a.useEffect)((function(){le().then(l)}),[]),p?r.a.createElement(i.a,{to:"/games"}):r.a.createElement(I.a,{style:{maxWidth:"500px"}},r.a.createElement("h1",null,"Create a Game"),r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"name"},"Name:"),r.a.createElement(h.a,{id:"name",name:"name",value:g,onChange:function(e){return b(e.target.value)}})),r.a.createElement(f.a,{color:"primary",onClick:function(){return e={name:g,ownerId:c.id},t=j,ue(e).then(t);var e,t}},"Save"))},me=function(e){var t=new A,n=new R;return t.update(e,{state:"pendingQuestion"}),t.get(e).then((function(e){return"currentQuestion"in e?n.get(e.currentQuestion):void 0})).then((function(t){var a=t?t.order:0;return n.list({gameId:e,from:a,limit:1})})).then((function(n){var a=n[0];return a&&t.update(e,{currentQuestionId:a.id}),a}))},de=function e(t){var n=t.endDate,a=t.intervalCallback,r=t.endedCallback;setTimeout((function(){var t=function(e){var t=(e-Date.now())/1e3;return t>0?t:0}(n);t>0?(a(t),e({endDate:n,intervalCallback:a,endedCallback:r})):r(t)}),1e3)},he=function(e){var t=e.seconds,n=e.intervalCallback,a=e.endedCallback,r=new Date(Date.now()+1e3*t);de({endDate:r,intervalCallback:n,endedCallback:a})},fe=function(e){var t=e.parentUrl,n=Object(i.h)().gameId,c=Object(a.useState)(5),l=Object(u.a)(c,2),o=l[0],s=l[1],m=Object(a.useState)(null),d=Object(u.a)(m,2),h=d[0],f=d[1];return Object(a.useEffect)((function(){n&&(he({seconds:5,intervalCallback:s,endedCallback:s}),me(n).then(f))}),[n]),r.a.createElement(N,{verticalCentered:!0},r.a.createElement("div",{className:"mb-4"},"Next question in..."),r.a.createElement("div",{className:"display-1"},Math.ceil(o)),o<=0&&h?r.a.createElement(i.a,{to:"".concat(t,"/questions/current")}):null)},ge=n(86),be=n(87),Ee=n(88),ve=n(89),pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new R;return n.get(e,t)},je=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new A,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new G;return n.update(e,{state:"showingQuestionResults"}),a.list({gameId:e,questionId:t}).then((function(e){var t={A:[],B:[],C:[],D:[]};return e.forEach((function(e){t[e.choice]=t[e.choice].concat(e.playerName)})),t}))},Oe=function(e){return(new R).list({gameId:e}).then((function(e){return e.length}))},we=function(e,t){return e.correctAnswer===t},ye=function(e){var t=e.result,n=e.className,a=e.question;return r.a.createElement("div",{className:n},r.a.createElement("h2",{className:"mb-4"},a?a.text:null),r.a.createElement(q.a,null,Object.entries(t).map((function(e){var t=Object(u.a)(e,2),n=t[0],c=t[1];return r.a.createElement(Q.a,{sm:12,md:6,className:"mb-4"},r.a.createElement(ge.a,{color:we(a,n)?"success":null,inverse:!!we(a,n)||null},r.a.createElement(be.a,null,r.a.createElement(Ee.a,null,r.a.createElement("strong",{className:"mr-2"},n),we(a,n)?"\u2714\ufe0f":"\u274c"),r.a.createElement(ve.a,null,c.join(", ")))))}))))},Ce=function(e){var t=e.parentUrl,n=Object(i.h)(),c=n.gameId,l=n.questionId,s=Object(a.useState)({}),m=Object(u.a)(s,2),d=m[0],h=m[1],g=Object(a.useState)(null),b=Object(u.a)(g,2),E=b[0],v=b[1],p=Object(a.useState)(null),j=Object(u.a)(p,2),O=j[0],w=j[1];return Object(a.useEffect)((function(){c&&l&&(pe(l,{gameId:c}).then(v),Oe(c).then(w),je(c,l).then(h))}),[c,l]),r.a.createElement(N,{verticalCentered:!0},r.a.createElement(ye,{className:"mb-4",result:d,question:E}),E&&E.order>=O?r.a.createElement(o.b,{to:"".concat(t,"/results/final")},r.a.createElement(f.a,{color:"primary"},"Show Final Results")):r.a.createElement(o.b,{to:"".concat(t,"/questions/pending")},r.a.createElement(f.a,{color:"primary"},"Next Question")))},Ie=n(90),ke=function(e){return(new G).list({gameId:e}).then((function(e){return e.filter((function(e){return"isCorrect"in e&&!!e.isCorrect})).reduce((function(e,t){return t.playerName in e?e[t.playerName]+=1:e[t.playerName]=1,e}),{})}))},Se=function(e,t){var n=Object(u.a)(e,2)[1],a=Object(u.a)(t,2)[1];return n>a?-1:n<a?1:0},Ne=function(e){var t=e.results,n=Object.entries(t);return n.sort(Se),r.a.createElement(z.a,null,n.slice(0,5).map((function(e,t){var n=Object(u.a)(e,2),a=n[0],c=n[1];return t<=2?r.a.createElement(M.a,{key:a,className:"d-flex justify-content-between"},a,r.a.createElement(Ie.a,{className:"ml-4 p-2",color:"success"},c)):r.a.createElement(M.a,{key:a,className:"d-flex justify-content-between"},a,r.a.createElement(Ie.a,{className:"ml-4 p-2"},c))})))},_e=function(e){var t=Object(i.h)().gameId,n=Object(a.useState)({}),c=Object(u.a)(n,2),l=c[0],o=c[1];return Object(a.useEffect)((function(){t&&ke(t).then(o)}),[t]),r.a.createElement(N,{verticalCentered:!0,maxWidth:500},r.a.createElement("h1",null,"Final Results"),r.a.createElement(Ne,{results:l}))},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new R;return t.update(e,{state:"showingQuestion"}),t.get(e).then((function(e){return n.get(e.currentQuestion)}))},De=function(e){var t=e.question,n=e.className;return r.a.createElement("div",{className:n},r.a.createElement("h2",{className:"mb-4"},t.text),r.a.createElement(q.a,null,["A","B","C","D"].map((function(e){return r.a.createElement(Q.a,{key:e,sm:12,md:6,className:"mb-4"},r.a.createElement(ge.a,null,r.a.createElement(be.a,null,r.a.createElement(Ee.a,null,r.a.createElement("strong",null,e)),r.a.createElement(ve.a,null,t["answer".concat(e)]))))}))))},Te=function(e){var t=e.isVisible,n=e.linkTo;return t?r.a.createElement(o.b,{to:n},r.a.createElement(f.a,{color:"primary"},"Show Result")):null},xe=function(e){var t=e.parentUrl,n=Object(i.h)().gameId,c=Object(a.useState)(null),l=Object(u.a)(c,2),o=l[0],s=l[1],m=Object(a.useState)(10),d=Object(u.a)(m,2),h=d[0],f=d[1];return Object(a.useEffect)((function(){n&&(he({seconds:10,intervalCallback:f,endedCallback:f}),Ae(n).then(s))}),[n]),r.a.createElement(N,{verticalCentered:!0},o?r.a.createElement("div",null,r.a.createElement(De,{question:o}),r.a.createElement("div",{className:"mt-4"},"Time left:"),r.a.createElement("div",{className:"display-1"},Math.ceil(h)),r.a.createElement(Te,{isVisible:h<=0,linkTo:"".concat(t,"/results/").concat(o.id)})):r.a.createElement("div",null,"Loading..."))},qe=function(){var e=Object(i.i)(),t=e.url,n=e.path;return r.a.createElement(i.d,{base:!0},r.a.createElement(i.b,{path:"".concat(n,"/questions/pending")},r.a.createElement(fe,{parentUrl:t})),r.a.createElement(i.b,{path:"".concat(n,"/questions/current")},r.a.createElement(xe,{parentUrl:t})),r.a.createElement(i.b,{path:"".concat(n,"/results/final")},r.a.createElement(_e,{parentUrl:t})),r.a.createElement(i.b,{path:"".concat(n,"/results/:questionId")},r.a.createElement(Ce,{parentUrl:t})))},Qe=function(e){return(new R).list(e)},We=n(28),Ue=n(91),Ge=n(92),Pe=n(43),Re=n(93),Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new R,n=Object.assign({},e);if("id"in n){var a=P(n,"id");return t.update(a,n)}return t.create(n)},Be=function(e){var t=e.question,n=Object(a.useState)(t),c=Object(u.a)(n,2),l=c[0],o=c[1],i=Object(a.useState)("default"),s=Object(u.a)(i,2),g=s[0],b=s[1],E=function(e){o(Object.assign({},l,e))};return r.a.createElement("div",null,r.a.createElement(ge.a,{body:!0,className:"mt-4 mb-4"},r.a.createElement(Ee.a,null,r.a.createElement(Ue.a,{className:"mb-2"},r.a.createElement(h.a,{type:"textarea",placeholder:"Question text",value:l.text||"",onChange:function(e){return E({text:e.target.value})}}))),["answerA","answerB","answerC","answerD"].map((function(e){return r.a.createElement(Ue.a,{key:e,className:"mb-2"},r.a.createElement(Ge.a,{addonType:"prepend"},r.a.createElement(Pe.a,null,e)),r.a.createElement(h.a,{placeholder:"Answer",value:e in l?l[e]:"",onChange:function(t){return E(Object(We.a)({},e,t.target.value))}}))})),r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"correctAnswerDropdown"},"Correct Answer"),r.a.createElement(h.a,{type:"select",name:"correctAnswer",id:"correctAnswerDropdown","data-testid":"correctAnswerDropdown",value:l.correctAnswer||"A",onChange:function(e){return E({correctAnswer:e.target.value})}},r.a.createElement("option",null,"A"),r.a.createElement("option",null,"B"),r.a.createElement("option",null,"C"),r.a.createElement("option",null,"D"))),"saving"===g?r.a.createElement(f.a,{disabled:!0,color:"primary",className:"mt-4"},r.a.createElement(Re.a,{type:"grow",size:"sm",color:"info",className:"mr-2"}),"Saving..."):r.a.createElement(f.a,{color:"primary",className:"mt-4",onClick:function(){b("saving"),Fe(l).then((function(){return b("default")}))}},"Save")))},Le=function(e){var t=Object(i.h)().gameId,n=Object(a.useState)(null),c=Object(u.a)(n,2),l=c[0],s=c[1],m=Object(a.useState)([]),d=Object(u.a)(m,2),h=d[0],g=d[1];return Object(a.useEffect)((function(){t&&null===l&&D(t).then((function(e){return s(e),e})).then((function(e){return Qe({gameId:e.id})})).then(g)}),[t,l]),l?r.a.createElement(N,{maxWidth:500},r.a.createElement("h1",{className:"mb-4"},l.name),h.length>0?r.a.createElement(o.b,{to:"/lobby/".concat(t)},r.a.createElement(f.a,{color:"success",size:"lg"},"Start Game")):null,h.map((function(e){return r.a.createElement(Be,{key:e.id,question:e})})),r.a.createElement(f.a,{onClick:function(){Fe({gameId:t,order:h.length+1}).then((function(e){return g(h.concat([e]))}))}},"Add Question")):r.a.createElement(N,{maxWidth:500},"Loading...")},ze=function(e){var t=new URLSearchParams(Object(i.g)().search).get("game");return r.a.createElement(N,{maxWidth:500,verticalCentered:!0},t)};var Me=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login"},r.a.createElement(ce,null)),r.a.createElement(i.b,{path:"/host/:gameId"},r.a.createElement(qe,null)),r.a.createElement(i.b,{path:"/lobby/:gameId"},r.a.createElement(Z,null)),r.a.createElement(i.b,{path:"/play/:gameId/as/:playerId"},r.a.createElement(L,null)),r.a.createElement(i.b,{path:"/join/:gameId"},r.a.createElement(x,null)),r.a.createElement(i.b,{path:"/join"},r.a.createElement(ze,null)),r.a.createElement(i.b,{path:"/games/create"},r.a.createElement(se,null)),r.a.createElement(i.b,{path:"/games/:gameId"},r.a.createElement(Le,null)),r.a.createElement(i.b,{exact:!0,path:"/games"},r.a.createElement(ie,null)),r.a.createElement(i.b,{path:"/"},r.a.createElement(H,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.593d9ca2.chunk.js.map
{"version":3,"sources":["view_components/CenteredContainer/styles.module.css","routes/HomeRoute/styles.module.css","store/BaseStore.js","store/PlayerStore.js","use_cases/addPlayer.js","view_components/CenteredContainer/index.js","entities/Game.js","store/GameStore.js","use_cases/getGame.js","routes/JoinRoute.js","use_cases/getPlayer.js","store/AnswerStore.js","utils/popKey.js","store/QuestionStore.js","use_cases/addAnswer.js","routes/PlayerRoute.js","routes/HomeRoute/index.js","use_cases/getLobbyPlayers.js","routes/LobbyRoute.js","store/UserStore.js","use_cases/signupUser.js","use_cases/loginUser.js","routes/LoginRoute.js","use_cases/getCurrentUser.js","use_cases/getCurrentUserGames.js","routes/MyGamesRoute.js","use_cases/createGame.js","routes/CreateGameRoute.js","use_cases/startNextQuestion.js","utils/calculateTimeLeft.js","routes/PendingQuestionRoute.js","use_cases/getQuestion.js","use_cases/calculateQuestionResults.js","use_cases/countTotalQuestions.js","routes/QuestionResultsRoute.js","use_cases/calculateFinalResults.js","routes/FinalResultsRoute.js","use_cases/showCurrentQuestion.js","view_components/Question.js","routes/CurrentQuestionRoute.js","routes/HostRoute.js","use_cases/getQuestions.js","use_cases/saveQuestion.js","view_components/EditableQuestion.js","routes/GameDetailsRoute.js","routes/FindGameRoute.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","firebase","require","FIREBASE_CONFIG","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","BaseStore","props","apps","length","initializeApp","this","firestore","auth","PlayerStore","playerId","scopes","collection","doc","gameId","get","then","_convertDocToPlayer","attributes","chain","add","playerRef","onChange","limit","undefined","onSnapshot","playersSnapshot","players","forEach","playerDoc","push","snapshot","docs","map","p","_convertDocToQuestion","Object","assign","id","data","addPlayer","create","CenteredContainer","Container","className","styles","centered","style","maxWidth","height","verticalCentered","children","Game","GameStore","name","ownerId","state","STATE_DRAFT","ref","_convertDocToGame","_getGameDoc","gameDoc","where","a","currentQuestion","currentQuestionId","update","game","path","getGame","JoinForm","playerName","setPlayerName","joinGame","Form","onSubmit","FormGroup","Label","Input","value","e","target","Button","color","type","JoinRoute","useParams","useState","setPlayerId","setGame","useEffect","to","getPlayer","AnswerStore","_popAttr","questionId","player","join","question","answerRef","_convertDocToAnswer","answerDoc","obj","attr","val","popKey","key","QuestionStore","addAttrs","questionDoc","attributesCopy","qnRef","qnDoc","from","orderBy","q","addAttributes","addAnswer","questionStore","isCorrect","correctAnswer","choice","console","log","AnswerGrid","recordAnswer","Row","ans","Col","sm","md","onClick","PlayerRoute","currentGame","setCurrentGame","answer","setAnswer","errorMessage","setErrorMessage","handleGameChange","catch","setTimeout","Alert","HomeRoute","setGameId","hero_heading","for","disabled","getLobbyPlayers","playerStore","gameStore","list","PlayerList","ListGroup","ListGroupItem","LobbyRoute","setPlayers","joinUrl","window","location","origin","href","UserStore","email","password","createUserWithEmailAndPassword","userCredentials","firebaseUser","user","_convertUser","error","errorCode","code","message","alert","signInWithEmailAndPassword","handleChange","onAuthStateChanged","uid","displayName","signupUser","loginUser","login","handleSubmit","event","authFn","successCallback","preventDefault","SignupForm","onUserChange","setEmail","setPassword","f","LoginForm","LoginRoute","isExistingUser","setIsExistingUser","setUser","toggleForm","getCurrentUser","userStore","Promise","resolve","onCurrentUserChange","getCurrentUserGames","MyGamesRoute","games","setGames","redirectUrl","setRedirectUrl","tag","action","createGame","CreateGameRoute","gameName","setGameName","gameAttributes","onCreate","startNextQuestion","nextOrder","order","questionArray","tickTimer","endDate","intervalCallback","endedCallback","timeLeft","date","difference","Date","now","calculateTimeLeft","startTimer","seconds","PendingQuestionRoute","parentUrl","setTimeLeft","nextQuestion","setNextQuestion","Math","ceil","getQuestion","calculateQuestionResults","answerStore","answers","results","concat","countTotalQuestions","questions","isCorrectChoice","ResultBoard","result","text","entries","Card","inverse","CardBody","CardTitle","CardText","QuestionResultsRoute","setResult","setQuestion","totalQuestionCount","setTotalQuestionCount","calculateFinalResults","filter","reduce","acc","curr","sortScores","b","score1","score2","Leaderboard","scores","sort","slice","index","Badge","FinalResultsRoute","setResults","showCurrentQuestion","Question","ShowResultsBtn","isVisible","linkTo","CurrentQuestionRoute","HostRoute","useRouteMatch","url","base","getQuestions","saveQuestion","EditableQuestion","draftQuestion","setDraftQuestion","componentState","setComponentState","updateDraft","newAttributes","body","InputGroup","placeholder","ansKey","InputGroupAddon","addonType","InputGroupText","data-testid","Spinner","size","GameDetailsRoute","setQuestions","newQn","FindGameRoute","gameIdPrefix","URLSearchParams","useLocation","search","App","exact","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.123e17ef.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"centered\":\"styles_centered__x3bzC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hero_heading\":\"styles_hero_heading__1odbt\"};","const firebase = require('firebase');\n\nconst FIREBASE_CONFIG = {\n  apiKey: \"AIzaSyC1QPvHcz3Y7gAsUUNN6sTy9sEgvtE9tRA\",\n  authDomain: \"cahoots-37a93.firebaseapp.com\",\n  databaseURL: \"https://cahoots-37a93.firebaseio.com\",\n  projectId: \"cahoots-37a93\",\n  storageBucket: \"cahoots-37a93.appspot.com\",\n  messagingSenderId: \"295846162316\",\n  appId: \"1:295846162316:web:cb3283790c16ffa536b0a9\",\n  measurementId: \"G-L8SFBD43DB\"\n};\n\n\nclass BaseStore {\n  constructor(props) {\n    // workaround to prevent initializing multiple times\n    if (!firebase.apps.length) {\n      firebase.initializeApp(FIREBASE_CONFIG);\n      // firebase.firestore.setLogLevel('debug');\n    }\n\n    this.firestore = firebase.firestore();\n    this.auth = firebase.auth();\n  }\n}\n\nexport default BaseStore;\n","import BaseStore from './BaseStore';\n\nclass PlayerStore extends BaseStore {\n  get(playerId, scopes = {}) {\n    return this.firestore\n      .collection('games')\n      .doc(scopes.gameId)\n      .collection('players')\n      .doc(playerId)\n      .get()\n      .then(this._convertDocToPlayer)\n  }\n\n  create(attributes = {}) {\n    let chain = this.firestore;\n    if ('gameId' in attributes) {\n      const gameId = attributes.gameId;\n      delete attributes.gameId;\n\n      chain = chain.collection('games').doc(gameId).collection('players');\n    }\n\n    return chain\n      .add(attributes)\n      .then(playerRef => playerRef.get())\n      .then(this._convertDocToPlayer)\n  }\n\n  list(scopes = {}, onChange) {\n    let chain = this.firestore;\n    if ('gameId' in scopes) {\n      chain = chain.collection('games').doc(scopes.gameId);\n    }\n    chain = chain.collection('players');\n\n    if ('limit' in scopes) {\n      chain = chain.limit(scopes.limit);\n    }\n\n    if (onChange !== undefined) {\n      return chain.onSnapshot(playersSnapshot => {\n        let players = [];\n        playersSnapshot.forEach(playerDoc => players.push(this._convertDocToPlayer(playerDoc)));\n        onChange(players);\n      });\n    }\n\n    return chain\n      .get()\n      .then(snapshot => snapshot.docs.map((p) => this._convertDocToQuestion(p)))\n  }\n\n  _convertDocToPlayer(playerDoc) {\n    return Object.assign({ id: playerDoc.id }, playerDoc.data());\n  }\n}\n\nexport default PlayerStore;\n","import PlayerStore from '../store/PlayerStore';\n\n\nconst addPlayer = (attributes) => {\n  return new PlayerStore().create(attributes);\n};\n\nexport default addPlayer;\n","import React from 'react';\nimport { Container } from 'reactstrap';\n\nimport styles from './styles.module.css';\n\n/**\n * Vertically and horizontally centered container. Parent height should be 100%.\n */\nconst CenteredContainer = props => {\n  return (\n    <Container className={styles.centered} style={{ maxWidth: props.maxWidth || null, height: props.verticalCentered ? \"100%\" : null }}>\n      {props.children}\n    </Container>\n  );\n};\n\nexport default CenteredContainer;\n\n","export default class Game {\n  static get STATE_DRAFT() { return 'draft' }\n}\n","import BaseStore from './BaseStore';\nimport Game from '../entities/Game';\n\n\nclass GameStore extends BaseStore {\n  create(attributes = {}) {\n    const { name, ownerId } = attributes;\n\n    return this.firestore\n      .collection('games')\n      .add({ name, ownerId, state: Game.STATE_DRAFT})\n      .then(ref => ref.get())\n      .then(this._convertDocToGame)\n  }\n\n  /**\n   *\n   *\n   * @param {String} gameId\n   * @param {Function} onChange - if provided, will trigger when Game is updated\n   * @returns\n   * @memberof GameStore\n   */\n  get(gameId, onChange) {\n    const doc = this._getGameDoc(gameId)\n\n    if (onChange !== undefined) {\n      return doc.onSnapshot(gameDoc => onChange(this._convertDocToGame(gameDoc)));\n    }\n\n    return doc.get().then(this._convertDocToGame);\n  }\n\n  list(scopes = {}) {\n    let chain = this.firestore.collection('games');\n\n    if ('ownerId' in scopes) {\n      // FIXME: ideally this would be independent of the gameId\n      chain = chain.where(\"ownerId\", \"==\", scopes.ownerId);\n    }\n\n    if ('limit' in scopes) {\n      chain = chain.limit(scopes.limit);\n    }\n\n    return chain\n      .get()\n      .then(snapshot => snapshot.docs.map((a) => this._convertDocToGame(a)))\n  }\n\n  update(gameId, attributes) {\n    const doc = this._getGameDoc(gameId);\n\n    if ('currentQuestionId' in attributes) {\n      attributes.currentQuestion = doc.collection('questions').doc(attributes.currentQuestionId);\n      delete attributes.currentQuestionId;\n    }\n\n    return doc.update(attributes);\n  }\n\n  _getGameDoc(gameId) {\n    return this.firestore\n      .collection('games')\n      .doc(gameId);\n  }\n\n  _convertDocToGame(gameDoc) {\n    let game = Object.assign({ id: gameDoc.id }, gameDoc.data());\n    if ('currentQuestion' in game) {\n      game.currentQuestionId = game.currentQuestion.id;\n      game.currentQuestion = game.currentQuestion.path;  // TODO: remove this\n    }\n    return game;\n  }\n}\n\nexport default GameStore;\n","import GameStore from '../store/GameStore';\n\n\nconst getGame = (gameId, onChange) => {\n  return new GameStore().get(gameId, onChange);\n};\n\nexport default getGame;\n","import React, { useState, useEffect } from 'react'\nimport { useParams, Redirect } from \"react-router-dom\"\nimport { Button, FormGroup, Label, Input, Form } from 'reactstrap';\n\nimport addPlayer from '../use_cases/addPlayer';\nimport CenteredContainer from '../view_components/CenteredContainer';\nimport getGame from '../use_cases/getGame';\n\n\nconst JoinForm = ({ playerName, setPlayerName, joinGame }) => {\n  return (\n    <Form onSubmit={joinGame}>\n      <FormGroup>\n        <Label>Your Nickname:</Label>\n        <Input\n          value={playerName}\n          onChange={e => setPlayerName(e.target.value)}\n        />\n      </FormGroup>\n      <Button color=\"primary\" type=\"submit\">JOIN</Button>\n    </Form>\n  )\n}\n\nconst JoinRoute = () => {\n  let { gameId } = useParams();\n  const [playerName, setPlayerName] = useState('');\n  const [playerId, setPlayerId] = useState('');\n  const [game, setGame] = useState(null);\n\n  useEffect(() => {\n    if (gameId && game === null) {\n      getGame(gameId).then(setGame);\n    }\n  }, [gameId, game])\n\n  return (\n    <CenteredContainer maxWidth={500} verticalCentered>\n      <h1>{game ? game.name : null}</h1>\n      {playerId ?\n          <Redirect\n            to={`/play/${gameId}/as/${playerId}`}\n          />\n        : <JoinForm\n          playerName={playerName}\n          setPlayerName={setPlayerName}\n          joinGame={() => addPlayer({ name: playerName, gameId }).then(p => setPlayerId(p.id))}\n        />\n      }\n    </CenteredContainer>\n  )\n}\n\nexport default JoinRoute\n","import PlayerStore from '../store/PlayerStore';\n\n\nconst getPlayer = (playerId, scopes = {}) => {\n  return new PlayerStore().get(playerId, scopes);\n};\n\nexport default getPlayer;\n","import BaseStore from './BaseStore';\n\nclass AnswerStore extends BaseStore {\n  /**\n   * Creates an Answer.\n   *\n   * @param {Object} attributes - `gameId` will be used to nest the subcollection\n   *  and generate a fully qualified reference for `playerId` and `questionId`\n   * @returns Object - an \"Answer\" object\n   * @memberof AnswerStore\n   */\n  create(attributes) {\n    const gameId = this._popAttr(attributes, 'gameId');\n    const playerId = this._popAttr(attributes, 'playerId');\n    const questionId = this._popAttr(attributes, 'questionId');\n\n    const subcollection = this.firestore\n      .collection('games')\n      .doc(gameId)\n      .collection('answers');\n\n    return subcollection\n      .add(Object.assign({\n        player: this.firestore.doc(['/games', gameId, 'players', playerId].join('/')),\n        question: this.firestore.doc(['/games', gameId, 'questions', questionId].join('/'))\n      }, attributes))\n      .then(answerRef => answerRef.get())\n      .then(this._convertDocToAnswer)\n  }\n\n  list(scopes = {}) {\n    let chain = this.firestore;\n\n    if ('gameId' in scopes) {\n      chain = chain.collection('games').doc(scopes.gameId);\n    }\n    chain = chain.collection('answers');\n\n    if ('questionId' in scopes) {\n      // FIXME: ideally this would be independent of the gameId\n      chain = chain.where(\"question\", \"==\", this.firestore.doc(`games/${scopes.gameId}/questions/${scopes.questionId}`));\n    }\n\n    if ('limit' in scopes) {\n      chain = chain.limit(scopes.limit);\n    }\n\n    return chain\n      .get()\n      .then(snapshot => snapshot.docs.map((a) => this._convertDocToAnswer(a)))\n  }\n\n  _convertDocToAnswer(answerDoc) {\n    return Object.assign({ id: answerDoc.id }, answerDoc.data());\n  }\n\n  _popAttr(obj, attr) {\n    const val = obj[attr];\n    delete obj[attr];\n    return val;\n  }\n}\n\nexport default AnswerStore;\n","export function popKey(obj, key) {\n  const value = obj[key];\n  delete obj[key];\n  return value;\n}\n","import BaseStore from './BaseStore';\nimport { popKey } from '../utils/popKey';\n\nclass QuestionStore extends BaseStore {\n  /**\n   * Retrieves a Question from the store\n   *\n   * @param {string} questionId - if a scope is not provided, this must be a\n   *   fully qualified ref, as there is no top-level questions collection.\n   * @param {Object} [scopes={}]\n   * @returns Object\n   * @memberof QuestionStore\n   */\n  get(questionId, scopes = {}) {\n    let chain = this.firestore;\n    let addAttrs = {};\n\n    if ('gameId' in scopes) {\n      chain = chain.collection('games').doc(scopes.gameId).collection('questions');\n      addAttrs['gameId'] = scopes.gameId;\n    }\n\n    return chain\n      .doc(questionId)\n      .get()\n      .then(questionDoc => this._convertDocToQuestion(questionDoc, addAttrs));\n  }\n\n  create(attributes) {\n    let attributesCopy = Object.assign({}, attributes);\n    const gameId = popKey(attributesCopy, 'gameId');\n\n    let collection = this.firestore.collection('games').doc(gameId).collection('questions');\n\n    return collection\n      .add(attributesCopy)\n      .then(qnRef => qnRef.get())\n      .then(qnDoc => this._convertDocToQuestion(qnDoc, { gameId }));\n  }\n\n  /**\n   * Update an object\n   *\n   * @param {String} questionId\n   * @param {Object} attributes\n   * @returns Promise<void>\n   * @memberof QuestionStore\n   */\n  update(questionId, attributes) {\n    let attributesCopy = Object.assign({}, attributes);\n    const gameId = popKey(attributesCopy, 'gameId');\n\n    let doc = this.firestore.collection('games').doc(gameId).collection('questions').doc(questionId);\n\n    return doc.update(attributesCopy);\n  }\n\n  list(scopes = {}) {\n    let chain = this.firestore;\n    let addAttrs = {};\n\n    if ('gameId' in scopes) {\n      chain = chain.collection('games').doc(scopes.gameId).collection('questions');\n      addAttrs['gameId'] = scopes.gameId;\n    }\n    if ('from' in scopes) {\n      chain = chain.where(\"order\", \">\", scopes.from);\n    }\n\n    chain = chain.orderBy(\"order\");\n\n    if ('limit' in scopes) {\n      chain = chain.limit(scopes.limit);\n    }\n\n    return chain\n      .get()\n      .then(snapshot => snapshot.docs.map((q) => this._convertDocToQuestion(q, addAttrs)));\n  }\n\n  _convertDocToQuestion(questionDoc, addAttributes = {}) {\n    return Object.assign({ id: questionDoc.id }, questionDoc.data(), addAttributes);\n  }\n}\n\nexport default QuestionStore;\n","import GameStore from '../store/GameStore';\nimport AnswerStore from '../store/AnswerStore';\nimport QuestionStore from '../store/QuestionStore';\n\n\n/**\n * Saves an Answer.\n *\n * @param {Object} attributes\n * @returns Object - an \"Answer\"\n */\nconst addAnswer = (attributes) => {\n  const questionStore = new QuestionStore();\n\n  return new GameStore()\n    .get(attributes.gameId)\n    .then(game => {\n      return questionStore.get(game.currentQuestionId, { gameId: game.id });\n    })\n    .then(question => {\n      attributes.isCorrect = question.correctAnswer === attributes.choice;\n      attributes.questionId = question.id;\n      console.log(attributes)\n      return new AnswerStore().create(attributes);\n    })\n};\n\nexport default addAnswer;\n","import React, { useState, useEffect } from 'react'\nimport { useParams } from \"react-router-dom\"\nimport { Button, Row, Col, Alert } from 'reactstrap';\n\nimport getPlayer from '../use_cases/getPlayer';\nimport addAnswer from '../use_cases/addAnswer';\nimport getGame from '../use_cases/getGame';\nimport CenteredContainer from '../view_components/CenteredContainer';\n\n\nconst AnswerGrid = ({ recordAnswer }) => {\n  return (\n    <Row>\n      {\n        ['A', 'B', 'C', 'D'].map((ans) =>\n          <Col sm={12} md={6} className=\"mb-4\" key={ans}>\n            <Button\n              className=\"w-100 h-100\"\n              onClick={() => recordAnswer(ans)}>\n                <strong>{ans}</strong>\n            </Button>\n          </Col>\n        )\n      }\n    </Row>\n  )\n}\n\nconst PlayerRoute = props => {\n  let { gameId, playerId } = useParams()\n  const [currentGame, setCurrentGame] = useState();\n  const [playerName, setPlayerName] = useState('')\n  const [answer, setAnswer] = useState(null)\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const handleGameChange = (game) => {\n    if (game) {\n      // workaround to clear answer\n      setAnswer(null);\n      setCurrentGame(game);\n    }\n  }\n\n  useEffect(() => {\n    getGame(gameId, handleGameChange);\n    getPlayer(playerId, { gameId })\n      .then(player => setPlayerName(player.name))\n  }, [])\n\n  const recordAnswer = ans => {\n    // playerName is for convenience later, though it feels a little like this knows more about the store than it should\n    addAnswer({ playerId, playerName, gameId, choice: ans })\n      .then(setAnswer)\n      .catch(e => {\n        setErrorMessage(e)\n        setTimeout(() => setErrorMessage(''), 5000)\n      })\n  }\n\n  switch (currentGame ? currentGame.state : null) {\n    case 'pendingQuestion':\n      return (\n        <CenteredContainer maxWidth={500} verticalCentered={true}>\n          Next question coming up...\n        </CenteredContainer>\n      )\n    case 'showingQuestion':\n      if (answer) {\n        return (\n          <CenteredContainer maxWidth={500} verticalCentered={true}>\n            You chose {answer.choice}!\n          </CenteredContainer>\n        )\n      }\n\n      return (\n        <CenteredContainer maxWidth={500} verticalCentered={true}>\n          <Row className=\"mb-4\">\n            <Col sm={12}>\n              <h2>Hi {playerName}!</h2>\n              <h3>Choose your answer:</h3>\n            </Col>\n          </Row>\n          <AnswerGrid recordAnswer={recordAnswer}/>\n          {errorMessage ? <Alert color=\"danger\">{errorMessage}</Alert> : null}\n        </CenteredContainer>\n      );\n    case 'showingQuestionResults':\n      return (\n        <CenteredContainer maxWidth={500} verticalCentered={true}>\n          <div>Showing question results...</div>\n        </CenteredContainer>\n      );\n\n    default:\n      return (\n        <CenteredContainer maxWidth={500} verticalCentered={true}>\n          Waiting for game to start...\n        </CenteredContainer>\n      )\n  }\n}\n\nexport default PlayerRoute\n","import React, { useState } from 'react'\nimport { Link } from \"react-router-dom\"\nimport { Button, Form, FormGroup, Label, Input } from 'reactstrap';\n\nimport CenteredContainer from '../../view_components/CenteredContainer';\nimport styles from './styles.module.css'\n\n\nconst HomeRoute = props => {\n  const [gameId, setGameId] = useState(null);\n\n  return (\n    <CenteredContainer maxWidth={500} verticalCentered={true}>\n      <h1 className={styles.hero_heading}>Cahoots!</h1>\n      <Form className=\"mb-5\">\n        <FormGroup>\n          <Label for=\"gameId\">Game ID:</Label>\n          <Input id=\"gameId\" value={gameId} onChange={e => setGameId(e.target.value)} />\n        </FormGroup>\n        <Link to={`/join/${gameId}`}>\n          <Button color=\"primary\" disabled={!gameId}>Find Game</Button>\n        </Link>\n      </Form>\n      <Link to=\"/login\">\n        Sign Up\n      </Link>\n    </CenteredContainer>\n  )\n}\n\nexport default HomeRoute\n","import PlayerStore from '../store/PlayerStore';\nimport GameStore from '../store/GameStore';\n\n\nconst getLobbyPlayers = (gameId, onChange, playerStore = new PlayerStore(), gameStore = new GameStore()) => {\n  gameStore.update(gameId, { state: 'waitingForPlayers' });\n  return playerStore.list({ gameId }, onChange);\n};\n\nexport default getLobbyPlayers;\n","import React, { useState, useEffect } from 'react'\nimport { useParams, Link } from \"react-router-dom\"\nimport { Button, ListGroup, ListGroupItem } from 'reactstrap';\n\nimport getLobbyPlayers from '../use_cases/getLobbyPlayers';\nimport CenteredContainer from '../view_components/CenteredContainer';\n\n\nconst PlayerList = ({ players }) => {\n  return (\n    <ListGroup>\n      {\n        players.map(player => (\n          <ListGroupItem key={player.id}>{player.name}</ListGroupItem>\n        ))\n      }\n    </ListGroup>\n  );\n}\n\n\nconst LobbyRoute = props => {\n  let { gameId } = useParams();\n  const [players, setPlayers] = useState([]);\n  const joinUrl = `${window.location.origin}/cahoots/#/join/${gameId}/`;\n\n  useEffect(() => {\n    if (gameId) {\n      getLobbyPlayers(gameId, setPlayers);\n    }\n  }, [gameId])\n\n  return (\n    <CenteredContainer verticalCentered={true} maxWidth={800}>\n      <h1 className=\"mb-4\">Waiting for Players to join...</h1>\n      <p>To join, go to <a href={joinUrl} target=\"_blank\">{joinUrl}</a></p>\n      <PlayerList players={players} />\n      <div className=\"mt-4\">\n        <Link to={`/host/${gameId}/questions/pending`}>\n          <Button color=\"primary\">Start</Button>\n        </Link>\n      </div>\n    </CenteredContainer>\n  )\n}\n\nexport default LobbyRoute\n","import BaseStore from './BaseStore';\n\nclass UserStore extends BaseStore {\n  create(attributes = {}) {\n    const { email, password } = attributes;\n\n    return this.auth\n      .createUserWithEmailAndPassword(email, password)\n      .then(userCredentials => {\n        const firebaseUser = userCredentials.user;\n        return this._convertUser(firebaseUser);\n      })\n      .catch((error) => {\n        // Handle Errors here.\n        const errorCode = error.code;\n        const errorMessage = error.message;\n        // auth/email-already-in-use\n        // auth/invalid-email\n        // auth/operation-not-allowed\n        if (errorCode === 'auth/weak-password') {\n          alert('The password is too weak.');\n        } else {\n          alert(errorMessage);\n        }\n      });\n  }\n\n  login({ email, password }) {\n    return this.auth\n      .signInWithEmailAndPassword(email, password)\n      .then(userCredentials => {\n        const firebaseUser = userCredentials.user;\n        return this._convertUser(firebaseUser);\n      })\n      .catch((error) => {\n        // Handle Errors here.\n        const errorCode = error.code;\n        const errorMessage = error.message;\n        // auth/email-already-in-use\n        // auth/invalid-email\n        // auth/operation-not-allowed\n        if (errorCode === 'auth/weak-password') {\n          alert('The password is too weak.');\n        } else {\n          alert(errorMessage);\n        }\n      });\n  }\n\n  onCurrentUserChange(handleChange) {\n    this.auth.onAuthStateChanged(user => {\n      if (user) {\n        handleChange(this._convertUser(user));\n      }\n    })\n  }\n\n  _convertUser(firebaseUser) {\n    return {\n      id: firebaseUser.uid,\n      email: firebaseUser.email,\n      name: firebaseUser.displayName,\n    };\n  }\n}\n\nexport default UserStore;\n","import UserStore from \"../store/UserStore\";\n\nconst signupUser = ({ email, password }) => {\n  const userStore = new UserStore();\n\n  return userStore.create({ email, password });\n}\n\nexport default signupUser;\n","import UserStore from \"../store/UserStore\";\n\nconst loginUser = ({ email, password }) => {\n  const userStore = new UserStore();\n\n  return userStore.login({ email, password });\n}\n\nexport default loginUser;\n","import React, { useState } from 'react'\nimport { Redirect } from \"react-router-dom\"\nimport { Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport signupUser from '../use_cases/signupUser';\nimport loginUser from '../use_cases/loginUser';\nimport CenteredContainer from '../view_components/CenteredContainer';\n\nconst handleSubmit = (event, { email, password, authFn, successCallback }) => {\n  event.preventDefault();\n  authFn({ email, password })\n    .then(user => successCallback(user))\n}\n\nconst SignupForm = ({ onUserChange }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  return (\n    <Form className=\"mb-5\" onSubmit={f => handleSubmit(f, { email, password, authFn: signupUser, successCallback: onUserChange })}>\n      <FormGroup>\n        <Label for=\"email\">Email:</Label>\n        <Input id=\"email\" name=\"email\" value={email} onChange={e => setEmail(e.target.value)} />\n      </FormGroup>\n      <FormGroup>\n        <Label>Password:</Label>\n        <Input type=\"password\" name=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\n      </FormGroup>\n      <Button color=\"primary\">Sign Up</Button>\n    </Form>\n  );\n}\n\nconst LoginForm = ({ onUserChange }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  return (\n    <Form className=\"mb-5\" onSubmit={f => handleSubmit(f, { email, password, authFn: loginUser, successCallback: onUserChange })}>\n      <FormGroup>\n        <Label for=\"email\">Email:</Label>\n        <Input id=\"email\" name=\"email\" value={email} onChange={e => setEmail(e.target.value)} />\n      </FormGroup>\n      <FormGroup>\n        <Label>Password:</Label>\n        <Input type=\"password\" name=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\n      </FormGroup>\n      <Button color=\"primary\">Login</Button>\n    </Form>\n  );\n}\n\nconst LoginRoute = props => {\n  const [isExistingUser, setIsExistingUser] = useState(false);\n  const [user, setUser] = useState(null);\n\n  const toggleForm = event => {\n    event.preventDefault();\n    setIsExistingUser(!isExistingUser);\n  }\n\n  if (user) {\n    return <Redirect to='/games' />\n  } else if (isExistingUser) {\n    return (\n      <CenteredContainer maxWidth={500} verticalCentered>\n        <h1>Login to Cahoots!</h1>\n        <LoginForm onUserChange={setUser} />\n        <div>\n          No account?&nbsp;\n          <a href=\"\" onClick={toggleForm}>Sign Up!</a>\n        </div>\n      </CenteredContainer>\n    );\n  } else {\n    return (\n      <CenteredContainer maxWidth={500} verticalCentered>\n        <h1>Signup for Cahoots!</h1>\n        <SignupForm onUserChange={setUser} />\n        <div>\n          Have an account?&nbsp;\n          <a href=\"\" onClick={toggleForm}>Login</a>\n        </div>\n      </CenteredContainer>\n    );\n  }\n}\n\nexport default LoginRoute\n","import UserStore from \"../store/UserStore\";\n\nconst getCurrentUser = () => {\n  const userStore = new UserStore();\n\n  return new Promise(resolve => userStore.onCurrentUserChange(resolve));\n}\n\nexport default getCurrentUser;\n","\nimport GameStore from \"../store/GameStore\";\nimport getCurrentUser from \"./getCurrentUser\";\n\n\nconst getCurrentUserGames = () => {\n  const gameStore = new GameStore();\n\n  return getCurrentUser().then(user => user ? gameStore.list({ ownerId: user.id }) : null);\n}\n\nexport default getCurrentUserGames;\n","import React, { useState, useEffect } from 'react'\nimport { Container, ListGroup, ListGroupItem } from 'reactstrap';\nimport getCurrentUserGames from '../use_cases/getCurrentUserGames';\nimport { Link, Redirect } from 'react-router-dom';\n\n\nconst MyGamesRoute = props => {\n  const [games, setGames] = useState([]);\n  const [redirectUrl, setRedirectUrl] = useState(null);\n\n  useEffect(() => {\n    getCurrentUserGames().then(setGames);\n  }, []);\n\n  if (redirectUrl) {\n    return <Redirect to={redirectUrl} />;\n  } else {\n    return (\n      <Container style={{maxWidth: \"500px\"}}>\n        <h1>Your Games</h1>\n        <ListGroup>\n          {\n            games.map(game => (\n              <ListGroupItem\n                key={game.id}\n                onClick={() => setRedirectUrl(`/games/${game.id}`)}\n                tag=\"button\"\n                action\n              >\n                {game.name}\n              </ListGroupItem>\n            ))\n          }\n          <ListGroupItem\n            onClick={() => setRedirectUrl('/games/create')}\n            tag=\"button\"\n            color=\"info\"\n            action\n          >\n            Create Game\n          </ListGroupItem>\n        </ListGroup>\n      </Container>\n    )\n  }\n}\n\nexport default MyGamesRoute\n","import GameStore from '../store/GameStore';\n\n\nconst createGame = (attributes) => {\n  return new GameStore().create(attributes);\n};\n\nexport default createGame;\n","import React, { useState, useEffect } from 'react'\nimport { Container, FormGroup, Label, Input, Button } from 'reactstrap';\nimport getCurrentUser from '../use_cases/getCurrentUser';\nimport createGame from '../use_cases/createGame';\nimport { Redirect } from 'react-router-dom';\n\n\nconst save = (gameAttributes, onCreate) => {\n  return createGame(gameAttributes).then(onCreate);\n}\n\nconst CreateGameRoute = props => {\n  const [user, setUser] = useState(null);\n  const [gameName, setGameName] = useState('');\n  const [game, setGame] = useState(null);\n\n  useEffect(() => {\n    getCurrentUser().then(setUser);\n  }, []);\n\n  if (game) {\n    return <Redirect to=\"/games\" />;\n  } else {\n    return (\n      <Container style={{maxWidth: \"500px\"}}>\n        <h1>Create a Game</h1>\n        <FormGroup>\n          <Label for=\"name\">Name:</Label>\n          <Input id=\"name\" name=\"name\" value={gameName} onChange={e => setGameName(e.target.value)} />\n        </FormGroup>\n        <Button color=\"primary\" onClick={() => save({ name: gameName, ownerId: user.id }, setGame)}>Save</Button>\n      </Container>\n    )\n  }\n}\n\nexport default CreateGameRoute\n","import GameStore from '../store/GameStore';\nimport QuestionStore from '../store/QuestionStore';\n\nconst startNextQuestion = (gameId) => {\n  const gameStore = new GameStore();\n  const questionStore = new QuestionStore();\n\n  gameStore.update(gameId, { state: 'pendingQuestion' });\n  return gameStore\n    .get(gameId)\n    .then(game => {\n      if ('currentQuestion' in game) {\n        return questionStore.get(game.currentQuestion);\n      }\n      else {\n        return;\n      }\n    })\n    .then(currentQuestion => {\n      const nextOrder = currentQuestion ? currentQuestion.order : 0 ;\n      return questionStore.list({ gameId, from: nextOrder, limit: 1 });\n    })\n    .then(questionArray => {\n      const question = questionArray[0];\n      if (question) {\n        gameStore.update(gameId, { currentQuestionId: question.id });\n      }\n\n      return question;\n    });\n}\n\nexport default startNextQuestion;\n","const calculateTimeLeft = date => {\n  const difference = (date - Date.now()) / 1000;\n  return difference > 0 ? difference : 0;\n};\n\nconst tickTimer = ({ endDate, intervalCallback, endedCallback }) => {\n  setTimeout(() => {\n    // timeLeft is in seconds\n    const timeLeft = calculateTimeLeft(endDate);\n    if (timeLeft > 0) {\n      intervalCallback(timeLeft);\n      tickTimer({ endDate, intervalCallback, endedCallback });\n    }\n    else {\n      endedCallback(timeLeft);\n    }\n  }, 1000);\n};\n\nexport const startTimer = ({ seconds, intervalCallback, endedCallback }) => {\n  const endDate = new Date(Date.now() + 1000 * seconds);\n  tickTimer({ endDate, intervalCallback, endedCallback });\n};\n","import React, { useState, useEffect } from 'react'\nimport { useParams, Redirect } from \"react-router-dom\"\n\nimport startNextQuestion from '../use_cases/startNextQuestion';\nimport { startTimer } from '../utils/calculateTimeLeft';\nimport CenteredContainer from '../view_components/CenteredContainer';\n\nconst SECONDS_TO_QUESTION = 5;\n\nconst PendingQuestionRoute = ({ parentUrl }) => {\n  let { gameId } = useParams();\n  const [ timeLeft, setTimeLeft ] = useState(SECONDS_TO_QUESTION);\n  const [ nextQuestion, setNextQuestion ] = useState(null);\n\n  useEffect(() => {\n    startTimer({ seconds: SECONDS_TO_QUESTION, intervalCallback: setTimeLeft, endedCallback: setTimeLeft });\n    startNextQuestion(gameId).then(setNextQuestion);\n  }, [])\n\n  return (\n    <CenteredContainer verticalCentered={true}>\n      <div className=\"mb-4\">Next question in...</div>\n      <div className=\"display-1\">\n        {Math.ceil(timeLeft)}\n      </div>\n      {timeLeft <= 0 && nextQuestion\n        ? <Redirect to={`${parentUrl}/questions/current`} />\n        : null\n      }\n    </CenteredContainer>\n  )\n}\n\nexport default PendingQuestionRoute\n","import QuestionStore from \"../store/QuestionStore\";\n\nconst getQuestion = (questionId, scopes, questionStore = new QuestionStore()) => {\n  return questionStore.get(questionId, scopes)\n};\n\nexport default getQuestion;\n","import GameStore from '../store/GameStore';\nimport AnswerStore from '../store/AnswerStore';\n\nconst calculateQuestionResults = (gameId, questionId, gameStore = new GameStore(), answerStore = new AnswerStore()) => {\n  gameStore.update(gameId, { state: 'showingQuestionResults' });\n  return answerStore\n    .list({ gameId, questionId })\n    .then(answers => {\n      let results = { 'A': [], 'B': [], 'C': [], 'D': []};\n      answers.forEach(answer => {\n        results[answer.choice] = results[answer.choice].concat(answer.playerName);\n      });\n      return results;\n    });\n}\n\nexport default calculateQuestionResults;\n","import QuestionStore from '../store/QuestionStore';\n\nconst countTotalQuestions = (gameId) => {\n  const questionStore = new QuestionStore();\n  return questionStore\n    .list({ gameId })\n    .then(questions => questions.length);\n}\n\nexport default countTotalQuestions;\n","import React, { useEffect, useState } from 'react'\nimport { useParams, Link } from \"react-router-dom\"\nimport { Button, Card, CardBody, Row, Col, CardTitle, CardText } from 'reactstrap';\n\nimport getQuestion from '../use_cases/getQuestion';\nimport calculateQuestionResults from '../use_cases/calculateQuestionResults';\nimport countTotalQuestions from '../use_cases/countTotalQuestions';\nimport CenteredContainer from '../view_components/CenteredContainer';\n\n\nconst isCorrectChoice = (question, choice) => {\n  return question.correctAnswer === choice;\n}\n\nconst ResultBoard = ({ result, className, question }) => {\n  return (\n    <div className={className}>\n      <h2 className=\"mb-4\">{question ? question.text : null}</h2>\n      <Row>\n        {\n          Object.entries(result).map(([answer, players]) => (\n            <Col sm={12} md={6} className=\"mb-4\">\n              <Card\n                color={isCorrectChoice(question, answer) ? 'success' : null}\n                inverse={isCorrectChoice(question, answer) ? true : null}\n              >\n                <CardBody>\n                  <CardTitle>\n                    <strong className='mr-2'>{answer}</strong>\n                    {isCorrectChoice(question, answer) ? '✔️' : '❌'}\n                  </CardTitle>\n                  <CardText>\n                    {players.join(', ')}\n                  </CardText>\n                </CardBody>\n              </Card>\n            </Col>\n          ))\n        }\n      </Row>\n    </div>\n  )\n}\n\nconst QuestionResultsRoute = ({ parentUrl }) => {\n  let { gameId, questionId } = useParams()\n  let [result, setResult] = useState({})\n  let [question, setQuestion] = useState(null)\n  let [totalQuestionCount, setTotalQuestionCount] = useState(null)\n\n  useEffect(() => {\n    if (gameId && questionId) {\n      getQuestion(questionId, { gameId }).then(setQuestion);\n      countTotalQuestions(gameId).then(setTotalQuestionCount);\n      calculateQuestionResults(gameId, questionId).then(setResult);\n    }\n  }, [gameId, questionId])\n\n  return (\n    <CenteredContainer verticalCentered={true}>\n      <ResultBoard className=\"mb-4\" result={result} question={question} />\n      {question && question.order >= totalQuestionCount ?\n        <Link to={`${parentUrl}/results/final`}>\n          <Button color=\"primary\">\n            Show Final Results\n          </Button>\n        </Link>\n        :\n        <Link to={`${parentUrl}/questions/pending`}>\n          <Button color=\"primary\">\n            Next Question\n          </Button>\n        </Link>\n      }\n    </CenteredContainer>\n  )\n}\n\nexport default QuestionResultsRoute\n\n// no result, no question, start button\n// no result, question, no buttons if time out, else show button if within time\n// have result, show result, hide question, next button (clears result)\n","import GameStore from '../store/GameStore';\nimport AnswerStore from '../store/AnswerStore';\n\n\n/**\n * Saves an Answer.\n *\n * @param {Object} attributes\n * @returns Object - an \"Answer\"\n */\nconst calculateFinalResults = (gameId) => {\n  const answerStore = new AnswerStore();\n\n  return answerStore.list({ gameId })\n    .then(answers => {\n      return answers\n        .filter(val => 'isCorrect' in val && !!val.isCorrect)\n        .reduce((acc, curr) => {\n          if (curr.playerName in acc) {\n            acc[curr.playerName] += 1;\n          } else {\n            acc[curr.playerName] = 1;\n          }\n          return acc;\n        }, {});\n    })\n};\n\nexport default calculateFinalResults;\n","import React, { useEffect, useState } from 'react'\nimport { useParams } from \"react-router-dom\"\nimport { ListGroup, ListGroupItem, Badge } from 'reactstrap';\nimport calculateFinalResults from '../use_cases/calculateFinalResults';\nimport CenteredContainer from '../view_components/CenteredContainer';\n\n\n// Compares two Arrays of playerName, score in terms of ascending score.\nconst sortScores = (a, b) => {\n  const [playerName1, score1] = a;\n  const [playerName2, score2] = b;\n\n  if (score1 > score2) {\n    return -1;\n  }\n  if (score1 < score2) {\n    return 1;\n  }\n  // a must be equal to b\n  return 0;\n}\n\nconst Leaderboard = ({ results }) => {\n  let scores = Object.entries(results);\n  scores.sort(sortScores);\n\n  return (\n    <ListGroup>\n      {\n        scores.slice(0, 5).map(([key, value], index) => {\n          if (index <= 2) {\n            return <ListGroupItem key={key} className=\"d-flex justify-content-between\">{key}<Badge className=\"ml-4 p-2\" color=\"success\">{value}</Badge></ListGroupItem>;\n          } else {\n            return <ListGroupItem key={key} className=\"d-flex justify-content-between\">{key}<Badge className=\"ml-4 p-2\">{value}</Badge></ListGroupItem>;\n          }\n        })\n      }\n    </ListGroup>\n\n  );\n}\n\nconst FinalResultsRoute = props => {\n  let { gameId } = useParams()\n  let [results, setResults] = useState({})\n\n  useEffect(() => {\n    calculateFinalResults(gameId).then(setResults);\n  }, [])\n\n  return (\n    <CenteredContainer verticalCentered={true} maxWidth={500}>\n      <h1>\n        Final Results\n      </h1>\n      <Leaderboard results={results} />\n    </CenteredContainer>\n  )\n}\n\nexport default FinalResultsRoute\n","import GameStore from '../store/GameStore';\nimport QuestionStore from '../store/QuestionStore';\n\nconst showCurrentQuestion = (gameId, gameStore = new GameStore(), questionStore = new QuestionStore) => {\n  gameStore.update(gameId, { state: 'showingQuestion' });\n  return gameStore\n    .get(gameId)\n    .then(game => {\n      return questionStore.get(game.currentQuestion)\n    });\n}\n\nexport default showCurrentQuestion;\n","import React from 'react'\nimport { Card, CardBody, Row, Col, CardTitle, CardText } from 'reactstrap';\n\n\n\nconst Question = ({ question, className }) => (\n  <div className={className}>\n    <h2 className=\"mb-4\">{question.text}</h2>\n    <Row>\n      {\n        ['A', 'B', 'C', 'D'].map((ans) =>\n          <Col key={ans} sm={12} md={6} className=\"mb-4\">\n            <Card>\n              <CardBody>\n                <CardTitle><strong>{ans}</strong></CardTitle>\n                <CardText>\n                  {question[`answer${ans}`]}\n                </CardText>\n              </CardBody>\n            </Card>\n          </Col>\n        )\n      }\n    </Row>\n  </div>\n)\n\nexport default Question\n","import React, { useState, useEffect } from 'react'\nimport { useParams, Link } from \"react-router-dom\"\nimport { Button } from 'reactstrap';\n\nimport showCurrentQuestion from '../use_cases/showCurrentQuestion'\nimport Question from '../view_components/Question'\nimport { startTimer } from '../utils/calculateTimeLeft';\nimport CenteredContainer from '../view_components/CenteredContainer';\n\nconst SECONDS_TO_QUESTION = 10;\n\nconst ShowResultsBtn = ({ isVisible, linkTo }) => {\n  return isVisible ?\n    (\n      <Link to={linkTo}>\n        <Button color=\"primary\">Show Result</Button>\n      </Link>\n    ) : null\n}\n\nconst CurrentQuestionRoute = ({ parentUrl }) => {\n  let { gameId } = useParams();\n  const [question, setQuestion] = useState(null);\n  const [timeLeft, setTimeLeft] = useState(SECONDS_TO_QUESTION);\n\n  useEffect(() => {\n    startTimer({ seconds: SECONDS_TO_QUESTION, intervalCallback: setTimeLeft, endedCallback: setTimeLeft });\n    showCurrentQuestion(gameId).then(setQuestion);\n  }, [])\n\n  return (\n    <CenteredContainer verticalCentered={true}>\n      {question ?\n          <div>\n            <Question question={question} />\n            <div className=\"mt-4\">Time left:</div>\n            <div className=\"display-1\">\n              {Math.ceil(timeLeft)}\n            </div>\n            <ShowResultsBtn\n              isVisible={timeLeft <= 0}\n              linkTo={`${parentUrl}/results/${question.id}`}\n            />\n          </div>\n        : <div>Loading...</div>\n      }\n    </CenteredContainer>\n  )\n}\n\nexport default CurrentQuestionRoute\n","import React from 'react'\nimport { Switch, Route, useRouteMatch } from \"react-router-dom\";\n\nimport PendingQuestionRoute from './PendingQuestionRoute';\nimport QuestionResultsRoute from './QuestionResultsRoute';\nimport FinalResultsRoute from './FinalResultsRoute';\nimport CurrentQuestionRoute from './CurrentQuestionRoute';\n\n\nconst HostRoute = () => {\n  let { url, path } = useRouteMatch();\n\n  return (\n    <Switch base>\n      <Route path={`${path}/questions/pending`}>\n        <PendingQuestionRoute parentUrl={url} />\n      </Route>\n      <Route path={`${path}/questions/current`}>\n        <CurrentQuestionRoute parentUrl={url} />\n      </Route>\n      <Route path={`${path}/results/final`}>\n        <FinalResultsRoute parentUrl={url} />\n      </Route>\n      <Route path={`${path}/results/:questionId`}>\n        <QuestionResultsRoute parentUrl={url} />\n      </Route>\n    </Switch>\n  );\n}\n\nexport default HostRoute\n","import QuestionStore from \"../store/QuestionStore\";\n\nconst getQuestions = (scopes) => {\n  const questionStore = new QuestionStore();\n  return questionStore.list(scopes)\n};\n\nexport default getQuestions;\n","import QuestionStore from \"../store/QuestionStore\";\nimport { popKey } from '../utils/popKey';\n\n/**\n * Creates a new Question or saves an existing one.\n *\n * @param {Object} attributes - should minimally contain `gameId`. If no `id` is included, is assumed to be a new Question\n * @returns Promise - resolves to either Object or void\n */\nconst saveQuestion = (attributes, questionStore = new QuestionStore()) => {\n  let attributesCopy = Object.assign({}, attributes);\n\n  if ('id' in attributesCopy) {\n    const questionId = popKey(attributesCopy, 'id');\n    return questionStore.update(questionId, attributesCopy);\n  } else {\n    return questionStore.create(attributesCopy);\n  }\n};\n\nexport default saveQuestion;\n","import React, { useState } from 'react';\nimport { InputGroup, InputGroupAddon, InputGroupText, Input, Card, CardTitle, CardText, Button, Alert, Spinner, CardBody, FormGroup, Label } from 'reactstrap';\nimport saveQuestion from '../use_cases/saveQuestion';\n\nconst STATE_DEFAULT = 'default';\nconst STATE_SAVING = 'saving';\n\n\nexport const EditableQuestion = ({ question }) => {\n  const [draftQuestion, setDraftQuestion] = useState(question)\n  const [componentState, setComponentState] = useState(STATE_DEFAULT);\n\n  const updateDraft = (newAttributes) => {\n    setDraftQuestion(Object.assign({}, draftQuestion, newAttributes));\n  }\n\n  return (\n    <div>\n      <Card body className=\"mt-4 mb-4\">\n        <CardTitle>\n          <InputGroup className=\"mb-2\">\n            <Input\n              type=\"textarea\"\n              placeholder=\"Question text\"\n              value={draftQuestion.text || ''}\n              onChange={e => updateDraft({ text: e.target.value })}\n            />\n          </InputGroup>\n        </CardTitle>\n        {['answerA', 'answerB', 'answerC', 'answerD'].map((ansKey) => (\n          <InputGroup key={ansKey} className=\"mb-2\">\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>{ansKey}</InputGroupText>\n            </InputGroupAddon>\n            <Input\n              placeholder=\"Answer\"\n              value={ansKey in draftQuestion ? draftQuestion[ansKey] : ''}\n              onChange={e => updateDraft({[ansKey]: e.target.value})}\n            />\n          </InputGroup>\n        ))}\n        <FormGroup>\n          <Label for=\"correctAnswerDropdown\">Correct Answer</Label>\n          <Input\n            type=\"select\"\n            name=\"correctAnswer\"\n            id=\"correctAnswerDropdown\"\n            data-testid=\"correctAnswerDropdown\"\n            value={draftQuestion.correctAnswer || ''}\n            onChange={e => updateDraft({ correctAnswer: e.target.value })}\n          >\n            <option>A</option>\n            <option>B</option>\n            <option>C</option>\n            <option>D</option>\n          </Input>\n        </FormGroup>\n        {componentState == STATE_SAVING ?\n          <Button disabled color=\"primary\" className=\"mt-4\">\n            <Spinner type=\"grow\" size=\"sm\" color=\"info\" className=\"mr-2\" />\n            Saving...\n          </Button>\n          :\n          <Button\n            color=\"primary\"\n            className=\"mt-4\"\n            onClick={() => {\n              setComponentState(STATE_SAVING);\n              saveQuestion(draftQuestion).then(() => setComponentState(STATE_DEFAULT));\n            }}\n          >\n            Save\n          </Button>\n        }\n      </Card>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react'\nimport { Button } from 'reactstrap';\nimport { Link, useParams } from 'react-router-dom';\nimport getGame from '../use_cases/getGame';\nimport getQuestions from '../use_cases/getQuestions';\nimport { EditableQuestion } from '../view_components/EditableQuestion';\nimport saveQuestion from '../use_cases/saveQuestion';\nimport CenteredContainer from '../view_components/CenteredContainer';\n\nconst GameDetailsRoute = props => {\n  const { gameId } = useParams();\n  const [game, setGame] = useState(null);\n  const [questions, setQuestions] = useState([]);\n\n  useEffect(() => {\n    if (gameId && game === null) {\n      getGame(gameId)\n        .then(game => {\n          setGame(game);\n          return game;\n        })\n        .then(game => getQuestions({ gameId: game.id }))\n        .then(setQuestions);\n    }\n  }, [gameId, game]);\n\n  if (game) {\n    return (\n      <CenteredContainer maxWidth={500}>\n        <h1 className=\"mb-4\">{game.name}</h1>\n        {questions.length > 0\n          ? <Link to={`/lobby/${gameId}`}>\n              <Button color=\"success\" size=\"lg\">\n                Start Game\n              </Button>\n            </Link>\n          : null\n        }\n        {questions.map(question => <EditableQuestion key={question.id} question={question}/>)}\n        <Button\n          onClick={() => {\n            saveQuestion({ gameId: gameId, order: questions.length + 1 })\n              .then(newQn => setQuestions(questions.concat([newQn])))\n          }}\n        >\n          Add Question\n        </Button>\n      </CenteredContainer>\n    );\n  } else {\n    return (<CenteredContainer maxWidth={500}>Loading...</CenteredContainer>)\n  }\n}\n\nexport default GameDetailsRoute\n","import React, { useState } from 'react'\nimport { Redirect, useLocation } from \"react-router-dom\"\nimport { Button, FormGroup, Label, Input } from 'reactstrap';\n\nimport CenteredContainer from '../view_components/CenteredContainer';\n\n\nconst useQueryParams = key => {\n  return new URLSearchParams(useLocation().search);\n}\n\nconst FindGameRoute = props => {\n  const queryParams = useQueryParams();\n  const gameIdPrefix = queryParams.get('game');\n\n  return (\n    <CenteredContainer maxWidth={500} verticalCentered>\n      {gameIdPrefix}\n    </CenteredContainer>\n  )\n}\n\nexport default FindGameRoute;\n","import React from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n\nimport JoinRoute from './routes/JoinRoute'\nimport PlayerRoute from './routes/PlayerRoute'\nimport HomeRoute from './routes/HomeRoute';\nimport LobbyRoute from './routes/LobbyRoute';\nimport LoginRoute from './routes/LoginRoute';\nimport MyGamesRoute from './routes/MyGamesRoute';\nimport CreateGameRoute from './routes/CreateGameRoute';\nimport HostRoute from './routes/HostRoute';\nimport GameDetailsRoute from './routes/GameDetailsRoute';\nimport FindGameRoute from './routes/FindGameRoute';\n\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <Switch>\n          <Route path=\"/login\">\n            <LoginRoute />\n          </Route>\n          <Route path=\"/host/:gameId\">\n            <HostRoute />\n          </Route>\n          <Route path=\"/lobby/:gameId\">\n            <LobbyRoute />\n          </Route>\n          <Route path=\"/play/:gameId/as/:playerId\">\n            <PlayerRoute />\n          </Route>\n          <Route path=\"/join/:gameId\">\n            <JoinRoute />\n          </Route>\n          <Route path=\"/join\">\n            <FindGameRoute />\n          </Route>\n          <Route path=\"/games/create\">\n            <CreateGameRoute />\n          </Route>\n          <Route path=\"/games/:gameId\">\n            <GameDetailsRoute />\n          </Route>\n          <Route exact path=\"/games\">\n            <MyGamesRoute />\n          </Route>\n          <Route path=\"/\">\n            <HomeRoute />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}